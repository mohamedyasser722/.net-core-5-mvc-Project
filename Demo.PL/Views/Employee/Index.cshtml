@model IEnumerable<Employee>
@{
    ViewData["Title"] = "All Employees";
}

@if (TempData["Message"] != null)
{
    <div class="alert alert-success">
        @TempData["Message"]
    </div>

    // appear for only 3 sec
    <script>
        setTimeout(function () {
            $("#alertMessage").fadeOut("slow");
        }, 3000); // 3000 milliseconds = 3 seconds
    </script>
}

<div id="alertMessage" class="alert alert-success" style="display:none;"></div>

<form id="searchForm" class="mt-3">
    <div class="input-group mb-3">
        <input type="text" id="searchString" class="form-control" placeholder="Search by name" name="searchString">
        <button type="button" id="searchButton" class="btn btn-primary">Search</button>
    </div>
</form>

<div id="employeeList">
    @Html.Partial("PartialViews/_EmployeeListPartial", Model)
</div>

<a asp-action="Create" class="btn btn-success">Add New Employee</a>

@section ValidationScriptsSection {
    <script>
        $(function () {
            $('#searchString').on('input', function () {
                var searchString = $(this).val();
                $.ajax({
                    url: '/Employee/Search',
                    type: 'GET',
                    data: { searchString: searchString },
                    success: function (result) {
                        $('#employeeList').html(result);
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });
            });
        });
    </script>
}

